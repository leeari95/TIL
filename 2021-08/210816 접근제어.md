# TIL(Today I Learned)

날짜: 2021년 8월 16일
작성자: 이아리
태그: Access Levels, 읽기 전용 구현, 접근수준, 접근제어

## 학습내용

오늘은 3주차 첫째날이다. 목차를 보니 내가 주말동안 공부했던 내용이 대부분이였다. 복습의 의미로 천천히 진도를 나가면서 다시 한번 학습하게 되었고, 오늘은 그 중 평소 알고있었던 지식이였으나 자세히는 공부하지 못했었던 '접근수준'에 대해서 공부하게 되었다. 과제를 풀다보니 접근수준과 옵셔널을 이용하여 코드를 개선하라는데... 접근수준을 제어하는 것이 나는 제일 어려웠다. 어떤 인스턴스를 비공개로 설정해주고 공개로 설정해줘야 하는지 감이 잘 안잡혀서 자세히 공부를 시작하게 되었다.

## 정리

🔍 **접근제어란?**

코드끼리 상호작용을 할 때 파일 간 또는 모듈 간에 접근을 제한할 수 있는 기능.

불필요한 접근으로 의도치 않은 결과를 초래하거나 꼭 필요한 부분만 제공해야 하는데 전체 코드가 노출될 가능성이 있을 때 접근제어를 이용한다.

🔍  **접근수준**

- 접근 수준 키워드를 통해 구현할 수 있다.
- 각 타입에 특정 접근수준을 지정할 수 있고, 타입 내부의 프로퍼티, 메서드, 이니셜라이저에도 접근수준을 지정할 수 있다.
- 접근수준을 명시할 수 있는 키워드는 open, public, internal, fileprivate, private 가 있다.

![ex_screenshot](/img/31.jpeg)

![ex_screenshot](/img/32.png)

🔍 **Swift의 접근제어는 모듈과 소스파일 기반으로 설계되었다.**

모듈은 배포할 코드의 묶음 단위이다. 프레임워크, 라이브러리, 애플리케이션이 모두 모듈 단위가 될 수 있다. import 키워드를 사용해 불러올 수 있다.

소스파일은 하나의 스위프트 소스코드 파일을 의미한다. 보통 파일하나에 타입하나만 정의하지만 때로는 소스파일 하나에 여러타입이나 함수 등 많은 것을 정의하거나 구현할 수도 있다.

**🔍  private과 fileprivate 차이점**

같은 파일 내부에서 private 접근수준과 fileprivate 접근수준은 사용할 때 분명한 차이가 있다. fileprivate 접근수준으로 지정한 요소는 같은 파일 어떤 코드에서도 접근할 수 있다.

반면에 private 접근수준으로 지정한 요소는 같은 파일 내부에 다른 타입의 코드가 있더라도 접근이 불가능합니다. 그러나 자신을 확장하는 익스텐션(extension) 코드가 같은 파일에 존재하는 경우에는 접근할 수 있다.

🔍 **접근제어 구현 참고사항**

- 상위 요소보다 하위 요소가 더 높은 접근수즌을 가질 수 없다.
- 함수의 매개변수로 특정 접근수준이 부여된 타입이 전달되거나 반환된다면 그 타입의 접근수준보다 함수의 접근수준이 높게 설정될 수 없다.
- 프레임워크를 만들 때는 다른 모듈에서 특정 기능에 접근할 수 있도록 API로 사용할 기능을 공개 접근 수준으로 지정해주어야 한다.
- 열거형 내부의 각 case별로 따로 접근수준을 부여할 수 없고, 각 case의 접근수준은 열거형 자체 접근수준을 따른다.

**🔍 읽기 전용 구현**

- 값을 가져갈 수는 있지만 변경할 수 없도록 구현하고 싶을 때 설정자만 더 낮은 접근수준을 갖도록 제한하면 된다.
- 요소의 접근수준 키워드 뒤에 접근수즌(set) 처럼 표현하면 설정자의 접근수준만 더 낮도록 지정해줄 수 있다.
- 설정자 접근수준 제한은 프로퍼티, 서브스크립트, 변수 등에 적용될 수 있으며, 해당 요소의 접근수준보다 같거나 낮은 수준으로 제한해주어야 한다.

## 타입의 설계

**일반화(Generalization)** 인스턴스의 공통 특징을 뽑아내는 것

**추상화(Abstraction)** 공통 특성 중 관심이 있는 부분만 추출하고 나머지는 무시하는 과정

**은닉화(Hiding)** 주요 사항이 겉으로 드러나지 않도록 감추는 것

**캡슐화(Encapsulation)** 중요사항을 감춘 상태에서 외부에서 그것을 사용할 수 있는 방법을 제공하고 외부와 소통을 하는 것
