{"primaryContentSections":[{"kind":"content","content":[{"anchor":"TIL-Today-I-Learned","type":"heading","text":"TIL (Today I Learned)","level":1},{"type":"paragraph","inlineContent":[{"type":"text","text":"3월 17일 (목)"}]},{"type":"heading","text":"학습 내용","anchor":"%ED%95%99%EC%8A%B5-%EB%82%B4%EC%9A%A9","level":2},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Widget 활동학습"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Decorator 패턴","type":"text"}]}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":" "}]},{"anchor":"%EA%B3%A0%EB%AF%BC%ED%95%9C-%EC%A0%90--%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95","level":2,"type":"heading","text":"고민한 점 \/ 해결 방법"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"[Widget 활동학습]","type":"text"}],"type":"strong"}]},{"type":"aside","content":[{"type":"paragraph","inlineContent":[{"text":"위젯 타겟을 추가하고, 생성된 파일의 Preview를 통해 구현된 위젯의 모습을 확인해 봅시다.","type":"text"}]}],"name":"Note","style":"note"},{"name":"Note","type":"aside","content":[{"type":"heading","text":"위젯을 구현하기 위한 Component 들에는 무엇이 있을까요?","level":3,"anchor":"%EC%9C%84%EC%A0%AF%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-Component-%EB%93%A4%EC%97%90%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%B4-%EC%9E%88%EC%9D%84%EA%B9%8C%EC%9A%94"}],"style":"note"},{"type":"paragraph","inlineContent":[{"type":"text","text":"https:\/\/developer.apple.com\/documentation\/swiftui\/widget"}]},{"inlineContent":[{"identifier":"https:\/\/i.imgur.com\/pNvORjO.png","type":"image"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"위젯 타입 (Configuration)"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"StaticConfiguration","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"IntentConfiguration","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"text":"업데이트 타이밍 정보 (TimelineProvider)","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"TimelineEntry","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"위젯의 뷰를 구성하는 SwiftUI (EntryView)","type":"text"}]}]}],"type":"unorderedList"},{"type":"thematicBreak"},{"style":"note","name":"Note","type":"aside","content":[{"type":"heading","level":3,"anchor":"%EC%83%9D%EC%84%B1%EB%90%9C-Widget-%ED%8C%8C%EC%9D%BC%EC%97%90-%EC%9D%B4%EB%AF%B8-%EC%A0%95%EC%9D%98%EB%90%98%EC%96%B4%EC%9E%88%EB%8A%94-%EA%B0%81-%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C%EB%8A%94-%EC%9C%84%EC%A0%AF%EC%97%90%EC%84%9C-%EC%96%B4%EB%96%A4-%EC%97%AD%ED%95%A0%EC%9D%84-%ED%95%98%EA%B3%A0-%EC%9E%88%EC%9D%84%EA%B9%8C%EC%9A%94","text":"생성된 Widget 파일에 이미 정의되어있는 각 구성요소는 위젯에서 어떤 역할을 하고 있을까요?"}]},{"items":[{"content":[{"inlineContent":[{"code":"struct Provider: TimelineProvider","type":"codeVoice"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"위젯의 내용(스냅샷, 타임라인)을 업데이트하는 주기(Timeline)을 제공하는 객체"}]}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"struct SimpleEntry: TimelineEntry","type":"codeVoice"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"위젯에 표시할 객체","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"struct MyWidgetEntryView : View"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"SwiftUI 에서 화면을 구성하는 View 구조체","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"@main struct MyWidget: Widget"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"위젯을 구성하는 메인 구조체"}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"code":"struct MyWidget_Previews: PreviewProvider","type":"codeVoice"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"SwiftUI 프리뷰 구조체"}]}]}]}]}],"type":"unorderedList"},{"type":"aside","content":[{"type":"paragraph","inlineContent":[{"code":"EntryView를 조작해 어떤 변화가 있는지 살펴봅시다.","type":"codeVoice"},{"text":" ","type":"text"},{"type":"text","text":"Provider 의 각 메서드는 어떤 역할을 할까요?"}]}],"style":"note","name":"Note"},{"type":"aside","name":"Note","style":"note","content":[{"level":3,"type":"heading","text":"Placeholder, getSnapshot, getTimeline 메서드는 어떤 역할인가요?","anchor":"placeholder-getSnapshot-getTimeline-%EB%A9%94%EC%84%9C%EB%93%9C%EB%8A%94-%EC%96%B4%EB%96%A4-%EC%97%AD%ED%95%A0%EC%9D%B8%EA%B0%80%EC%9A%94"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"func placeholder(in context: Context) -> SimpleEntry"}]},{"items":[{"content":[{"inlineContent":[{"text":"WidgetKit 이 처음 위젯을 렌더링할 때 사용한다.","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"code":"func getSnapshot(in context: Context, completion: @escaping (SimpleEntry) -> ())","type":"codeVoice"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"위젯 갤러리에서 위젯을 보여주기 위해, 스냅샷을 요청할 때 호출된다.","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"func getTimeline(in context: Context, completion: @escaping (Timeline<Entry>) -> ())"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"위젯을 업데이트하는 타이밍(주기)와 policy 를 제공한다.","type":"text"}]}]}]}]}],"type":"unorderedList"},{"style":"note","content":[{"anchor":"Timeline%EC%9D%98-policy%EB%A5%BC-%EB%B3%80%EA%B2%BD%ED%95%98%EB%A9%B4-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%90%A0%EA%B9%8C%EC%9A%94","type":"heading","text":"Timeline의 policy를 변경하면 어떻게 될까요?","level":3}],"type":"aside","name":"Note"},{"items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"atEnd"},{"text":" : 주어진 Timeline 의 마지막 날짜(Date) 이후에 새로운 타임라인 요청하는 policy","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"after(date:)"},{"text":" : 마지막 날짜(Date) 이후 WidgetKit이 새 타임라인을 요청할 미래 날짜를 지정하는 policy","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Never"},{"type":"text","text":" : 누가 지시하기 전까지는 Timeline 을 요청하지 않는 policy"},{"type":"text","text":" "},{"text":"(WidgetKit은 앱이 WidgetCenter를 사용하여 WidgetKit에 새 타임라인을 요청하도록 지시 할 때 까지 다른 timeline을 요청하지 않는다)","type":"text"}]}]}],"type":"unorderedList"},{"style":"note","name":"Note","type":"aside","content":[{"type":"heading","text":"위젯은 언제 업데이트될까요?","anchor":"%EC%9C%84%EC%A0%AF%EC%9D%80-%EC%96%B8%EC%A0%9C-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EB%90%A0%EA%B9%8C%EC%9A%94","level":3}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"getTimeline 메서드가 TimelineEntry를 제공하고, TimelineEntry에는 위젯의 콘텐츠를 언제 업데이트 할지에 대한 Date가 들어있다!"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"WidgetKit은 그걸 보고 그 시간이 되면 그 때 나와야 할 view를 Widget에 전송한다.","type":"text"}]}]}]},{"name":"Note","type":"aside","style":"note","content":[{"text":"위젯이 구성되는 방식을 순차적으로 설명해봅시다.","type":"heading","level":3,"anchor":"%EC%9C%84%EC%A0%AF%EC%9D%B4-%EA%B5%AC%EC%84%B1%EB%90%98%EB%8A%94-%EB%B0%A9%EC%8B%9D%EC%9D%84-%EC%88%9C%EC%B0%A8%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%84%A4%EB%AA%85%ED%95%B4%EB%B4%85%EC%8B%9C%EB%8B%A4"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"TimelineEntry 가 보여줘야 하는 객체의 Model 및 날짜(Date 타입의 프로퍼티)를 갖고 있다."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"TimelineProvider"}]}]},{"content":[{"inlineContent":[{"text":"EntryView","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Widget","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"[Decorator Pattern]"}],"type":"strong"}]},{"level":3,"type":"heading","text":"Decorator 패턴이란?","anchor":"Decorator-%ED%8C%A8%ED%84%B4%EC%9D%B4%EB%9E%80"},{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/i.imgur.com\/1mNaHir.png","type":"image"}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"기존 객체가 가진 동작들을 포함하는 특수 래퍼를 만들고, 새로운 기능을 추가할 수 있는 디자인 패턴"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"상속(Inheritance)과 합성(Composition)을 사용하여 객체에 동적으로 책임을 추가할 수 있게 하는 패턴","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"클래스의 코드를 전혀 바꾸지 않고도 객체에 새로운 임무를 부여하기 위해서 등장했다."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"기존 객체를 감싸는 Wrapper를 만들고 해당 Wrapper 객체에 다른 기능들을 넣는 동작 때문에 Wrapper 패턴이라고도 한다.","type":"text"}]}]}],"type":"unorderedList"},{"anchor":"%EC%96%B8%EC%A0%9C-%EC%82%AC%EC%9A%A9%ED%95%A0%EA%B9%8C","level":3,"type":"heading","text":"언제 사용할까?"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"다른 객체들에 영향을 주지 않고 개별 객체에 기능들을 추가하고 싶을 때 사용한다.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"추가한 기능들은 언제든 없앨 수 있다."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"상속을 사용하여 기능을 확장하는 것이 힘들 경우에 사용한다.","type":"text"}]}]}]},{"level":3,"type":"heading","anchor":"%EA%B5%AC%EC%A1%B0","text":"구조"},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"https:\/\/i.imgur.com\/LhsZcVe.png"}]},{"inlineContent":[{"type":"codeVoice","code":"Component"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"동적으로 추가된 기능을 가질 수 있는 객체에 대한 인터페이스를 정의한다."}]}]}]},{"type":"paragraph","inlineContent":[{"code":"Concreate Component","type":"codeVoice"}]},{"items":[{"content":[{"inlineContent":[{"text":"Component 인터페이스의 기능을 실제로 구현한 객체","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"새로운 기능들이 추가될 수 있는 객체"}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"codeVoice","code":"Decorator"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Component 인터페이스를 따르는 객체를 참조할 수 있는 필드가 존재"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Component 인터페이스를 따르는 인터페이스를 정의"}]}]}]},{"inlineContent":[{"type":"codeVoice","code":"Concreate Decorator"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"구성 요소에 기능을 추가"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"code":"Client","type":"codeVoice"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Component 인터페이스를 통해 모든 객체와 함께 동작할 수 있게 해준다."}],"type":"paragraph"}]}]},{"type":"heading","level":3,"text":"장점","anchor":"%EC%9E%A5%EC%A0%90"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"상속을 통한 하위 클래스를 만들지 않고도 객체의 기능을 확장할 수 있다."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"런타임에서 객체에 책임을 추가하고 제거할 수 있다."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"객체를 여러 데코레이터로 래핑하여 여러 동작을 합칠 수 있다.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"객체 지향 프로그래밍에서 중요한 단일 책임 원칙(OCP)을 지킬 수 있다."}]}]}]},{"anchor":"%EB%8B%A8%EC%A0%90","type":"heading","level":3,"text":"단점"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"래퍼 스택에서 특정 래퍼를 제거하는 것이 어렵다."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"데코레이터 기능이 데코레이터 스택 순서에 의존해야 한다."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"코드가 복잡해질 수 있다."}],"type":"paragraph"}]}]},{"text":"코드 예제","level":3,"type":"heading","anchor":"%EC%BD%94%EB%93%9C-%EC%98%88%EC%A0%9C"},{"type":"codeListing","syntax":"swift","code":["\/\/ Component","protocol Juice {","    func cost() -> Int","}","","\/\/ Concreate Component","class BananaJuice: Juice {","    func cost() -> Int {","        return 4000","    }","}","","class OrangeJuice: Juice {","    func cost() -> Int {","        return 3800","    }","}","","\/\/ Decorator","protocol JuiceDecorator: Juice {","    var wrappee: Juice { get set } \/\/ 객체를 참조할 wrappee를 정의","}","","\/\/ Concreate Decorator","class StrawberryBanana: JuiceDecorator {","    var wrappee: Juice","    ","    init(wrappee: Juice) {","        self.wrappee = wrappee","    }","    ","    func cost() -> Int {","        return wrappee.cost() + 1500","    }","    ","    func addHoney() { \/\/ 새로운 기능 추가","        print(\"딸바주스에 꿀 추가 해드렸슴다.\")","    }","}","","\/\/ Concreate Decorator","class KiwiBanana: JuiceDecorator {","    var wrappee: Juice","    ","    init(wrappee: Juice) {","        self.wrappee = wrappee","    }","    ","    func cost() -> Int {","        return wrappee.cost() + 1000","    }","    ","    func addIce() { \/\/ 새로운 기능 추가","        print(\"키위주스에 얼음추가 해드렸슴다. 시원하게드세여~\")","    }","}","","\/\/ Concreate Decorator","class Absolute: JuiceDecorator {","    var wrappee: Juice","    ","    init(wrappee: Juice) {","        self.wrappee = wrappee","    }","    ","    func cost() -> Int {","        return wrappee.cost() + 8000","    }","    ","    \/\/ 새로운 기능 추가","    func moreJuice() {","        print(\"주스를 더 많이 넣어드렸어여~\")","    }","    ","    func moreDrink() {","        print(\"술 더많이 타드렸어여~\")","    }","}","","let strawberryBananaJuice = StrawberryBanana(wrappee: BananaJuice())","print(strawberryBananaJuice.cost()) \/\/ 5500","strawberryBananaJuice.addHoney() \/\/ 딸바주스에 꿀 추가 해드렸슴다.","","let kiwiBananaJuice = KiwiBanana(wrappee: BananaJuice())","print(kiwiBananaJuice.cost()) \/\/ 5000","kiwiBananaJuice.addIce() \/\/ 키위주스에 얼음추가 해드렸슴다. 시원하게드세여~","","let screwDriver = Absolute(wrappee: OrangeJuice())","print(screwDriver.cost()) \/\/ 11800","screwDriver.moreJuice() \/\/ 주스를 더 많이 넣어드렸어여~",""]},{"type":"thematicBreak"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"참고링크","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"https:\/\/refactoring.guru\/design-patterns\/decorator","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"https:\/\/icksw.tistory.com\/244","type":"text"}]}]}]}]}]}]}],"schemaVersion":{"patch":0,"major":0,"minor":3},"variants":[{"paths":["\/documentation\/arinote\/220317_widget,_timeline,_decorator_pattern"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"hierarchy":{"paths":[["doc:\/\/AriNote\/documentation\/AriNote","doc:\/\/AriNote\/documentation\/AriNote\/SwiftUI"]]},"metadata":{"modules":[{"name":"Ari's Notes"}],"roleHeading":"Article","role":"article","title":"220317 Widget, Timeline, Decorator Pattern"},"kind":"article","identifier":{"url":"doc:\/\/AriNote\/documentation\/AriNote\/220317_Widget,_Timeline,_Decorator_Pattern","interfaceLanguage":"swift"},"references":{"https://i.imgur.com/pNvORjO.png":{"alt":null,"variants":[{"url":"https:\/\/i.imgur.com\/pNvORjO.png","traits":["1x","light"]}],"identifier":"https:\/\/i.imgur.com\/pNvORjO.png","type":"image"},"https://i.imgur.com/LhsZcVe.png":{"alt":null,"variants":[{"url":"https:\/\/i.imgur.com\/LhsZcVe.png","traits":["1x","light"]}],"identifier":"https:\/\/i.imgur.com\/LhsZcVe.png","type":"image"},"https://i.imgur.com/1mNaHir.png":{"alt":null,"variants":[{"url":"https:\/\/i.imgur.com\/1mNaHir.png","traits":["1x","light"]}],"identifier":"https:\/\/i.imgur.com\/1mNaHir.png","type":"image"},"doc://AriNote/documentation/AriNote/SwiftUI":{"role":"collectionGroup","identifier":"doc:\/\/AriNote\/documentation\/AriNote\/SwiftUI","url":"\/documentation\/arinote\/swiftui","title":"SwiftUI","kind":"article","abstract":[{"type":"text","text":"언능 UIKit만큼 SwiftUI를 더 잘 알고 싶다!"}],"type":"topic"},"doc://AriNote/documentation/AriNote":{"kind":"symbol","type":"topic","identifier":"doc:\/\/AriNote\/documentation\/AriNote","abstract":[{"type":"codeVoice","code":"Today I Learned"}],"url":"\/documentation\/arinote","title":"Ari's Notes","role":"collection"}}}