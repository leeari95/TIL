{"kind":"article","variants":[{"paths":["\/documentation\/arinote\/220211_uicontextualaction,_uialertaction,_uiactivityviewcontroller,_setselected,_selectedbackgroundview,_actionsheet,_popoverpresentationcontroller,_viewwilltransition"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"patch":0,"minor":3,"major":0},"identifier":{"url":"doc:\/\/AriNote\/documentation\/AriNote\/220211_UIContextualAction,_UIAlertAction,_UIActivityViewController,_setSelected,_selectedBackgroundView,_actionSheet,_popoverPresentationController,_viewWillTransition","interfaceLanguage":"swift"},"primaryContentSections":[{"content":[{"level":1,"text":"TIL (Today I Learned)","type":"heading","anchor":"TIL-Today-I-Learned"},{"type":"paragraph","inlineContent":[{"text":"2월 11일 (금)","type":"text"}]},{"level":2,"type":"heading","anchor":"%ED%95%99%EC%8A%B5-%EB%82%B4%EC%9A%A9","text":"학습 내용"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"UIContextualAction","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"UIAlertAction"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"UIActivityViewController"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"UITableViewCell - "},{"code":"setSelected","type":"codeVoice"},{"type":"text","text":", "},{"type":"codeVoice","code":"selectedBackgroundView"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"iPad에서 ActionSheet를 Present를 하면 크래쉬가 발생"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"popoverPresentationController","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"viewWillTransition"}],"type":"paragraph"}]}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":" "}]},{"anchor":"%EA%B3%A0%EB%AF%BC%ED%95%9C-%EC%A0%90--%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95","text":"고민한 점 \/ 해결 방법","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"[UIContextualAction에 텍스트말고 아이콘 삽입하는 방법]","type":"text"}]}]},{"code":["let deleteAction = UIContextualAction(style: .destructive, title: nil) { _, _, completeHandeler in","    self.deleteCell(indexPath: indexPath)","    completeHandeler(true)","}","deleteAction.image = UIImage(systemName: \"trash.fill\")"],"type":"codeListing","syntax":"swift"},{"items":[{"content":[{"inlineContent":[{"text":"먼저 ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uicontextualaction","type":"reference","isActive":true},{"type":"text","text":" 인스턴스를 생성한다."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"생성할 때 title이 nil인게 포인트이다."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"이후 생성한 UIContextualAction에 image를 대입해주면 된다."}]}]}],"type":"unorderedList"},{"style":"note","type":"aside","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"적용된 모습"}]}],"name":"Note"},{"inlineContent":[{"identifier":"https:\/\/i.imgur.com\/SdZTntY.png","type":"image"}],"type":"paragraph"},{"style":"note","content":[{"inlineContent":[{"type":"codeVoice","code":"의문점"},{"text":" ","type":"text"},{"text":"UIContextualAction 파라미터 중 handler의 용도는 무엇일까?","type":"text"},{"text":" ","type":"text"},{"text":"https:\/\/developer.apple.com\/documentation\/uikit\/uicontextualaction\/handler","type":"text"}],"type":"paragraph"}],"name":"Note","type":"aside"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"handler의 작업이 실제로 수행된 경우 핸들러에 true를 전달하여 작업이 완료되었다는 것을 알려주는 용도라고 한다."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"지금같이 간단한 로직인 경우 그냥 true로 기입해주면 되겠지만, 만약 복잡한 로직이 추가되어 에러처리를 해줘야하는 경우에는 false를 전달하여 작업이 완료되지 않았다는 것을 알리는 용도인 것 같다."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"https:\/\/developer.apple.com\/forums\/thread\/129420"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"여기 글을 참고하니 현재는 completeHandeler를 사용하지 않지만, 나중에 사용할 수 있으므로 적절한 값을 전달하는 것을 권장한다는 답변이 있다."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"그래서 팀원들과 의논하여 true로 기입해주기로 하였다.","type":"text"}]}]}]},{"type":"thematicBreak"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"[UIAlertAction 편집하기]"}]}],"type":"paragraph"},{"content":[{"inlineContent":[{"type":"text","text":"단순한 글자말고 여기에도 아이콘같은걸 추가할 수 있을까?"}],"type":"paragraph"}],"style":"note","name":"Note","type":"aside"},{"code":["let deleteAction = UIAlertAction(title: \"Delete\", style: .destructive, handler: deleteHandler)","let deleteImage = UIImage(systemName: \"trash.fill\")","deleteAction.setValue(deleteImage, forKey: \"image\")","deleteAction.setValue(0, forKey: \"titleTextAlignment\")"],"type":"codeListing","syntax":"swift"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"setValue 메소드를 통해서 지정해줄 수 있었다.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"단순하게 이미지와 텍스트의 alignment를 지정해주었다."}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"0 - left"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"1 - center","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"2 - right"}]}]}]}]}],"type":"unorderedList"},{"content":[{"type":"paragraph","inlineContent":[{"text":"적용된 모습","type":"text"}]}],"type":"aside","style":"note","name":"Note"},{"inlineContent":[{"type":"image","identifier":"https:\/\/i.imgur.com\/ke4Oujp.png"}],"type":"paragraph"},{"type":"thematicBreak"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"[Cell이 select 되었을 때 background 색깔 입혀주기]","type":"text"}]}],"type":"paragraph"},{"name":"Note","type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"text":"메모를 선택하고 수정하고 있을 때 선택한 Cell의 배경색을 입혀주어 선택한 셀을 수정하고 있다는 느낌을 주고 싶었다.","type":"text"}]}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"먼저 커스텀한 UITableViewCell 클래스에서 ","type":"text"},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uitableviewcell\/1623255-setselected","type":"reference"},{"type":"text","text":" 메소드를 오버라이드 해주자."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"그리고 selected 여부에 따라 뷰의 변화를 주는 로직을 추가한다."}],"type":"paragraph"}]}],"type":"unorderedList"},{"syntax":"swift","code":["override func setSelected(_ selected: Bool, animated: Bool) {","    super.setSelected(selected, animated: animated)","    if selected {","        titleLabel.textColor = .white","        dateLabel.textColor = .systemGray6","        bodyLabel.textColor = .systemGray6","    } else {","        titleLabel.textColor = .label","        dateLabel.textColor = .systemGray","        bodyLabel.textColor = .systemGray","    }","}"],"type":"codeListing"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"그리고 Cell이 초기화 될 때 "},{"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uitableviewcell\/1623226-selectedbackgroundview","type":"reference","isActive":true},{"type":"text","text":"도 할당해준다."}],"type":"paragraph"}]}],"type":"unorderedList"},{"syntax":"swift","type":"codeListing","code":["private func setUpViews() {","    ...","    let selectedBackgroundView = UIView()","    selectedBackgroundView.backgroundColor = .systemOrange","    self.selectedBackgroundView = selectedBackgroundView","}"]},{"type":"aside","content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"메모","type":"text"}],"type":"strong"},{"type":"text","text":" "},{"text":"setSelected를 오버라이드 하지 않고 단순히 selectedBackgroundView만 할당해준다면, 셀을 선택해도 배경색이 바뀌지 않는다.","type":"text"}]}],"style":"note","name":"Note"},{"type":"unorderedList","items":[{"content":[{"text":"완성된 모습","anchor":"%EC%99%84%EC%84%B1%EB%90%9C-%EB%AA%A8%EC%8A%B5","type":"heading","level":3}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"https:\/\/i.imgur.com\/pli9vhF.gif"}]},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"[iPad에서 UIAlertController의 actionSheet 사용시 발생하는 오류]","type":"text"}],"type":"strong"}]},{"style":"note","type":"aside","name":"Note","content":[{"type":"paragraph","inlineContent":[{"text":"오류메세지","type":"text"}]}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"UIActivityViewController를 present를 해주려는데 아래와 같은 오류메세지가 떴다.","type":"text"}]}]}],"type":"unorderedList"},{"type":"codeListing","syntax":null,"code":["Thread 1: \"Your application has presented a UIAlertController (<UIAlertController: 0x10d813a00>) of style UIAlertControllerStyleActionSheet from CloudNotes.SplitViewController (<CloudNotes.SplitViewController: 0x11f7068f0>).","The modalPresentationStyle of a UIAlertController with this style is UIModalPresentationPopover. ","You must provide location information for this popover through the alert controller's popoverPresentationController.","You must provide either a sourceView and sourceRect or a barButtonItem. ","If this information is not known when you present the alert controller, you may provide it in the UIPopoverPresentationControllerDelegate method -prepareForPopoverPresentation.\""]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"간단히 해석하자면 iPad에서 액션시트를 present를 할 경우 모달스타일이 UIModalPresentationPopover이고, 이걸 사용할 때는 barButtonItem 또는 해당 창의 대한 위치를 설정해주어야 한다고 되어있다."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"따라서 설정해주어야 하는 것은 2가지중 하나이다."}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"필수적으로 sourceView 지정해주기"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiviewcontroller\/1621428-popoverpresentationcontroller","isActive":true},{"type":"text","text":"에 sourceRect 또는 barButtonItem 할당해주기"}]}]}]}]}],"type":"unorderedList"},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"해결 방법"}]}],"type":"aside","style":"note","name":"Note"},{"type":"paragraph","inlineContent":[{"type":"text","text":"얼럿을 present 해주기 전에 다음과 같은 if문을 추가해주자!"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"UIBarButtonItem에 추가해주는 방법","type":"text"}]}]}],"type":"unorderedList"},{"code":["\/\/ UIViewController extension 내부...","if let popoverController = activityViewController.popoverPresentationController {","    popoverController.sourceView = self.splitViewController?.view","    popoverController.barButtonItem = sender \/\/ 메소드 내부라서 파라미터로 barButtonItem 전달받아 할당해주었다.","}"],"type":"codeListing","syntax":"swift"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"위치를 정해주는 방법","type":"text"}]}]}]},{"code":["if let popoverController = activityViewController.popoverPresentationController {","    popoverController.sourceView = self.splitViewController?.view \/\/ present할 뷰 지정","    popoverController.sourceRect = CGRect( \/\/ 뷰의 정 가운데 위치로 지정","        x: self.splitViewController?.view.bounds.midX,","        y: self.splitViewController?.view.bounds.midY,","        width: 0,","        height: 0","    )","    popoverController.permittedArrowDirections = [] \/\/ 화살표를 빈배열로 대입","}"],"syntax":"swift","type":"codeListing"},{"name":"Note","content":[{"level":3,"anchor":"%EC%9D%98%EB%AC%B8%EC%A0%90","text":"의문점","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"위치를 지정하고 나서 화면을 돌렸는데… 가운데 위치에 안있고 요상한 곳에 있다….","type":"text"},{"text":" ","type":"text"},{"type":"image","identifier":"https:\/\/i.imgur.com\/9Dk3gSK.gif"}]}],"type":"aside","style":"note"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"해결방법","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"화면이 돌아갈 때마다 포지션을 다시 잡아주면 된다. 그걸 위해 "},{"identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uicontentcontainer\/1621466-viewwilltransition","type":"reference","isActive":true},{"type":"text","text":" 메소드를 활용해보겠다."}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"이 메소드는 ViewController의 뷰 크기를 변경하기 전에 호출이 된다.","type":"text"}],"type":"paragraph"}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"일단 얼럿을 present하는 뷰에 popoverController라는 변수를 만들어준다.","type":"text"}]}]}]},{"code":["class SplitViewController: UISplitViewController {","    ...","    var popoverController: UIPopoverPresentationController?"],"type":"codeListing","syntax":"swift"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"그리고 viewWillTransition 메소드를 오버라이드하여 위치를 고쳐주는 로직을 추가한다."}]}]}]},{"type":"codeListing","syntax":"swift","code":["if let popoverController = self.popoverController {","    popoverController.sourceRect = CGRect(","    x: size.width * 0.5,","    y: size.height * 0.5,","    width: 0,","    height: 0)","}"]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"UIViewController extension으로 만들어준 메소드 내부(맨 처음 얼럿을 생성하여 present하는 곳)에도 popoverController를 할당해주도록 해주었다."}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"codeListing","syntax":"swift","code":["let splitViewController = self.splitViewController as? SplitViewController","splitViewController?.popoverController = popoverController"]},{"type":"aside","content":[{"type":"heading","anchor":"%ED%95%B4%EA%B2%B0%EB%90%9C-%EB%AA%A8%EC%8A%B5","level":3,"text":"해결된 모습"},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"https:\/\/i.imgur.com\/uy2XqZj.gif"}]}],"name":"Note","style":"note"},{"type":"thematicBreak"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"참고링크","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"https:\/\/stackoverflow.com\/questions\/30056236\/uialertaction-list-of-values"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"https:\/\/royhelen.tistory.com\/53"}]}]},{"content":[{"inlineContent":[{"text":"https:\/\/devsc.tistory.com\/76","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"https:\/\/velog.io\/@dlskawns96\/UITableViewCell%EC%97%90-%EC%BB%A4%EC%8A%A4%ED%85%80-Swipe-action-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0-Swift"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"https:\/\/nemecek.be\/blog\/5\/how-to-implement-swipe-to-delete-action-with-custom-icon"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"https:\/\/stackoverflow.com\/questions\/26347085\/add-image-to-uialertaction-in-uialertcontroller"}]}]}]}]}]}],"kind":"content"}],"metadata":{"role":"article","modules":[{"name":"Ari's Notes"}],"roleHeading":"Article","title":"220211 UIContextualAction, UIAlertAction, UIActivityViewController, setSelected, selectedBackgroundView, actionSheet, popoverPresentationController, viewWillTransition"},"hierarchy":{"paths":[["doc:\/\/AriNote\/documentation\/AriNote","doc:\/\/AriNote\/documentation\/AriNote\/UIKit"]]},"sections":[],"references":{"https://developer.apple.com/documentation/uikit/uiviewcontroller/1621428-popoverpresentationcontroller":{"titleInlineContent":[{"type":"text","text":"popoverPresentationController"}],"url":"https:\/\/developer.apple.com\/documentation\/uikit\/uiviewcontroller\/1621428-popoverpresentationcontroller","title":"popoverPresentationController","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uiviewcontroller\/1621428-popoverpresentationcontroller"},"https://i.imgur.com/pli9vhF.gif":{"identifier":"https:\/\/i.imgur.com\/pli9vhF.gif","variants":[{"url":"https:\/\/i.imgur.com\/pli9vhF.gif","traits":["1x","light"]}],"type":"image","alt":null},"https://i.imgur.com/SdZTntY.png":{"identifier":"https:\/\/i.imgur.com\/SdZTntY.png","variants":[{"url":"https:\/\/i.imgur.com\/SdZTntY.png","traits":["1x","light"]}],"type":"image","alt":null},"https://i.imgur.com/9Dk3gSK.gif":{"identifier":"https:\/\/i.imgur.com\/9Dk3gSK.gif","variants":[{"url":"https:\/\/i.imgur.com\/9Dk3gSK.gif","traits":["1x","light"]}],"type":"image","alt":null},"https://i.imgur.com/uy2XqZj.gif":{"identifier":"https:\/\/i.imgur.com\/uy2XqZj.gif","variants":[{"url":"https:\/\/i.imgur.com\/uy2XqZj.gif","traits":["1x","light"]}],"type":"image","alt":null},"https://developer.apple.com/documentation/uikit/uicontextualaction":{"titleInlineContent":[{"text":"UIContextualAction","type":"text"}],"url":"https:\/\/developer.apple.com\/documentation\/uikit\/uicontextualaction","title":"UIContextualAction","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uicontextualaction"},"https://developer.apple.com/documentation/uikit/uitableviewcell/1623255-setselected":{"titleInlineContent":[{"type":"text","text":"setSelected(_:animated:)"}],"url":"https:\/\/developer.apple.com\/documentation\/uikit\/uitableviewcell\/1623255-setselected","title":"setSelected(_:animated:)","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uitableviewcell\/1623255-setselected"},"https://developer.apple.com/documentation/uikit/uitableviewcell/1623226-selectedbackgroundview":{"titleInlineContent":[{"text":"selectedBackgroundView","type":"text"}],"url":"https:\/\/developer.apple.com\/documentation\/uikit\/uitableviewcell\/1623226-selectedbackgroundview","title":"selectedBackgroundView","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uitableviewcell\/1623226-selectedbackgroundview"},"doc://AriNote/documentation/AriNote/UIKit":{"kind":"article","title":"UIKit","abstract":[{"type":"text","text":"한몸이 되보자…"}],"type":"topic","role":"collectionGroup","identifier":"doc:\/\/AriNote\/documentation\/AriNote\/UIKit","url":"\/documentation\/arinote\/uikit"},"https://i.imgur.com/ke4Oujp.png":{"type":"image","variants":[{"traits":["1x","light"],"url":"https:\/\/i.imgur.com\/ke4Oujp.png"}],"alt":null,"identifier":"https:\/\/i.imgur.com\/ke4Oujp.png"},"https://developer.apple.com/documentation/uikit/uicontentcontainer/1621466-viewwilltransition":{"titleInlineContent":[{"text":"viewWillTransition","type":"text"}],"url":"https:\/\/developer.apple.com\/documentation\/uikit\/uicontentcontainer\/1621466-viewwilltransition","title":"viewWillTransition","type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uicontentcontainer\/1621466-viewwilltransition"},"doc://AriNote/documentation/AriNote":{"kind":"symbol","type":"topic","identifier":"doc:\/\/AriNote\/documentation\/AriNote","abstract":[{"type":"codeVoice","code":"Today I Learned"}],"url":"\/documentation\/arinote","title":"Ari's Notes","role":"collection"}}}