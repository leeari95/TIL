{"identifier":{"url":"doc:\/\/AriNote\/documentation\/AriNote\/220113_Cache,_pagination","interfaceLanguage":"swift"},"metadata":{"roleHeading":"Article","role":"article","modules":[{"name":"Ari's Notes"}],"title":"220113 Cache, pagination"},"primaryContentSections":[{"kind":"content","content":[{"text":"TIL (Today I Learned)","level":1,"type":"heading","anchor":"TIL-Today-I-Learned"},{"type":"paragraph","inlineContent":[{"text":"1월 13일 (목)","type":"text"}]},{"level":2,"text":"학습 내용","type":"heading","anchor":"%ED%95%99%EC%8A%B5-%EB%82%B4%EC%9A%A9"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"오픈 마켓 프로젝트 STEP 2 피드백 답변 코멘트"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"오픈 마켓 프로젝트 STEP Bonus 진행해보기"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Cache 활동학습","type":"text"}]}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":" "}]},{"anchor":"%EA%B3%A0%EB%AF%BC%ED%95%9C-%EC%A0%90--%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95","level":2,"type":"heading","text":"고민한 점 \/ 해결 방법"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"[pagination]","type":"text"}]}]},{"type":"codeListing","syntax":"swift","code":["    func scrollViewDidScroll(_ scrollView: UIScrollView) {","        let contentHeight = scrollView.contentSize.height \/\/ 스크롤뷰의 전체 크기","        let yOffset = scrollView.contentOffset.y \/\/ 현재 스크롤하고 있는 위치","        let heightRemainBottomHeight = contentHeight - yOffset","        let frameHeight = scrollView.frame.size.height","        if heightRemainBottomHeight < frameHeight ,","           let hasNextPage = page?.hasNext, hasNextPage {","            currentPage += 1","            self.requestProducts()","        }","    }"]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"현재 스크롤하고 있는 위치, 스크롤 뷰의 전체 크기를 구한다.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"스크롤뷰 전체 높이 - 현재 스크롤 하고 있는 위치","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"계산한다. 현재 스크롤하고 있는 yOffset 같은 경우 스크롤을 내릴 때마다 값이 늘어난다."}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"그리고 계산한 해당 값(heightRemainBottomHeight)을 스크롤 뷰의 실제 사이즈(frameHeight)와 비교하여 다음 페이지가 존재하는 경우 네트워킹을 시도하도록 설계하였다."}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"스크롤을 할 수록 "},{"code":"heightRemainBottomHeight","type":"codeVoice"},{"type":"text","text":" 값이 적어진다."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"frameHeight"},{"type":"text","text":" 높이만큼 스크롤을 할 경우 "},{"code":"heightRemainBottomHeight","type":"codeVoice"},{"text":"가 작아지는 순간이 온다.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"그때 다음페이지가 존재하는지 확인후 "},{"type":"codeVoice","code":"네트워킹"},{"text":"을 시도하고","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"네트워킹이 끝나면 콜렉션뷰를 ","type":"text"},{"code":"reloadData","type":"codeVoice"},{"text":"를 호출하여 추가된 데이터를 가지고 셀을 더 추가한다.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"추가하고 나면 스크롤뷰의 전체 크기인 "},{"code":"contentHeight","type":"codeVoice"},{"text":"의 크기도 늘어난다.","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"선언한 각 변수를 print를 찍어보며 스크롤을 내려보면 이해가 더 쉽다.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"image","identifier":"https:\/\/i.imgur.com\/mOZGNPY.gif"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"이 방법은 이미지 캐싱을 처리하지 않으면 버벅이는 단점이 있다. 이미지 캐싱을 처리하면 단점은 완전히 사라지는 것을 확인하였다."}]}]}]},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"[Cache 활동학습]"}]}]},{"level":3,"text":"캐시란 무엇이고 어떤 역할일까?","type":"heading","anchor":"%EC%BA%90%EC%8B%9C%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B4%EA%B3%A0-%EC%96%B4%EB%96%A4-%EC%97%AD%ED%95%A0%EC%9D%BC%EA%B9%8C"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"자주 사용하는 데이터를 임시저장"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"성능 향상"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"데이터를 재사용"}]}]},{"content":[{"inlineContent":[{"text":"자주 사용되는 데이터를 임시로 저장해두는 것","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"성능의 향상을 위해 데이터를 임시로 저장해주는 것"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"캐싱된 데이터가 있다면 추가적인 자원을 소모하지 않고 caching Data를 가져다 쓸 수 있기 때문에 자원을 절약할 수 있고 애플리케이션의 처리 속도가 향상된다."}]}]}],"type":"unorderedList"},{"level":3,"anchor":"%EB%AA%87-%EA%B0%80%EC%A7%80-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C-%EC%BA%90%EC%8B%9C%EB%A5%BC-%EA%B5%AC%EB%B6%84%ED%95%B4%EB%B3%BC%EA%B9%8C","type":"heading","text":"몇 가지 기준으로 캐시를 구분해볼까?"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"데이터를 사용하는 빈도"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"CPU와의 거리"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"데이터의 특성(큰 크기의 이미지?, 바뀌지 않는 정보)"}]}]}]},{"text":"캐시는 클라이언트 서버 구분이 있나?","anchor":"%EC%BA%90%EC%8B%9C%EB%8A%94-%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%84%9C%EB%B2%84-%EA%B5%AC%EB%B6%84%EC%9D%B4-%EC%9E%88%EB%82%98","type":"heading","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"캐시는 구분되어질 수 있을 것 같다"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"클라이언트는 local에 저장할 수 있는 캐시가 있을 것"}]}]},{"content":[{"inlineContent":[{"text":"서버는 여러 요청에 대해 저장할 수 있는 캐시가 있을 수 있을 것","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"서버 부하를 줄이기 위해 서버에 자주하는 요청을 캐싱해둔다."}]}]}],"type":"unorderedList"}]}]}]}]},{"text":"캐시는 어디에 저장할까?","type":"heading","level":3,"anchor":"%EC%BA%90%EC%8B%9C%EB%8A%94-%EC%96%B4%EB%94%94%EC%97%90-%EC%A0%80%EC%9E%A5%ED%95%A0%EA%B9%8C"},{"items":[{"content":[{"inlineContent":[{"text":"CPU 레지스터","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Ram 메모리"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"어플리케이션의 메모리 영역의 일부분을 캐싱에 사용하는 것을 의미"}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"디스크","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"데이터를 파일 형태로 디스크에 저장하는 것을 의미"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"앱 내부 디스크(UserDefaults, CoreData)","type":"text"}]}]}]}]}],"type":"unorderedList"},{"text":"또 다른 기준이 있나?","level":3,"type":"heading","anchor":"%EB%98%90-%EB%8B%A4%EB%A5%B8-%EA%B8%B0%EC%A4%80%EC%9D%B4-%EC%9E%88%EB%82%98"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"데이터가 저장되는 계층에 따른 구분"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"L1, L2, L3 캐시 (비용, 속도, 용량에 따른 구분)","type":"text"}]}]}]}]},{"content":[{"inlineContent":[{"type":"text","text":"읽기 및 쓰기에 따른 구분"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"읽기 캐시","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"한번 읽어들인 데이터를 캐시에 저장 후 추후 read시 사용","type":"text"}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"쓰기 캐시"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"읽기 캐시의 기능 뿐 아니라 write시 디스크에 바로 올리지 않고 캐시에 임시로 저장후 추후 캐시 데이터를 모아 한번에 디스크에 저장"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"매번 변경 시 디스크에 여러번 저장할 필요가 없다."}]}]}]}]}]}]}],"type":"unorderedList"}]}],"type":"unorderedList"},{"level":3,"type":"heading","text":"캐시를 구현할 때 고려해야 하는 캐시 운용 정책에는 어떤것들이 있을까?","anchor":"%EC%BA%90%EC%8B%9C%EB%A5%BC-%EA%B5%AC%ED%98%84%ED%95%A0-%EB%95%8C-%EA%B3%A0%EB%A0%A4%ED%95%B4%EC%95%BC-%ED%95%98%EB%8A%94-%EC%BA%90%EC%8B%9C-%EC%9A%B4%EC%9A%A9-%EC%A0%95%EC%B1%85%EC%97%90%EB%8A%94-%EC%96%B4%EB%96%A4%EA%B2%83%EB%93%A4%EC%9D%B4-%EC%9E%88%EC%9D%84%EA%B9%8C"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"보안성"}]},{"items":[{"content":[{"inlineContent":[{"text":"캐시 접근 및 저장 관련","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"type":"text","text":"데이터 수명"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"캐시 교체 정책 (Cache Replacement Policy)","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"데이터 사용시간에 따른 교체 (사용시간 작은 것 부터)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"LRU, FIFO, LFU 구조에 따라 교체"}]}]},{"content":[{"inlineContent":[{"text":"Random, NUR, Optional 등등","type":"text"}],"type":"paragraph"}]}]}]},{"content":[{"inlineContent":[{"type":"text","text":"저장하는 시점에 따른 정책"}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":3,"type":"heading","anchor":"iOS-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C-%EC%BA%90%EC%8B%B1%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95%EC%97%90%EB%8A%94-%EB%AC%B4%EC%97%87%EB%AC%B4%EC%97%87%EC%9D%B4-%EC%9E%88%EC%9D%84%EA%B9%8C","text":"iOS 환경에서 캐싱하는 방법에는 무엇무엇이 있을까?"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"메모리 캐싱 방법 : NSCache, URLCache 등등.."}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"어플리케이션의 메모리 영역의 일부분을 캐싱에 사용하는 것을 의미"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"어플리케이션이 종료되어 메모리에서 해제되면 이 영역에 있던 리소스들은 OS에 반환되면서 메모리 캐싱되어있던 리소스들은 사라지게 된다."}]}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"디스크 캐싱 방법 : FileManager 를 통해서 Cache 디렉토리를 관리할 수 있다.","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"어플리케이션을 껐다 켜도 데이터가 사라지지 않지만 디스크 캐싱이 반복적으로 발생하면 어플리케이션이 차지하는 용량이 커진다.","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"ex) 카카오톡에서 이미지나 동영상을 디바이스에 저장하지 않더라도 눈으로 보기 위해서는 파일을 다운로드 받아야하는데, 이때 다운로드 받은 파일들이 Disk Caching되어 앱을 종료했다가 실행해도 볼 수 있다.","type":"text"}],"type":"paragraph"}]}]}]}]}]}],"type":"unorderedList"},{"type":"thematicBreak"},{"type":"heading","text":"- AlamofireImage 라이브러리와 Kingfisher 라이브러리의 캐시 정책은 어떤 차이가 있나요?","anchor":"AlamofireImage-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EC%99%80-Kingfisher-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EC%9D%98-%EC%BA%90%EC%8B%9C-%EC%A0%95%EC%B1%85%EC%9D%80-%EC%96%B4%EB%96%A4-%EC%B0%A8%EC%9D%B4%EA%B0%80-%EC%9E%88%EB%82%98%EC%9A%94","level":3},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"AlamofireImage"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"AutoPurgingImageCache는 CachedImages라는 Array를 들고 있다. disk는 사용하지 않는다.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"memory warning notification을 받으면 AutoPurgingImageCache의 removeAllimages를 호출한다."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"AutoPurgingImageCache에 이미지를 add했을 때 메모리 용량을 설정값보다 많이 차지하고 있는 경우 lastAccessData로 정렬하여 지운다. - LRU(Least Recently Used) 방식"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"URLCache는 지워주는 부분이 따로 없기 때문에 직접 지워줘야 한다."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"expire 정책이 없다."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"reference","identifier":"https:\/\/github.com\/Alamofire\/AlamofireImage#image-cache","isActive":true}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"GIF 처리를 별도로 할수 없다."}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"직접 Custom Alamofire Response Serializer를 만들도록 안내하고 있다."}],"type":"paragraph"}]}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Kingfisher","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"메모리와 디스크 모두를 위한 하이브리드 캐시","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"열거형으로 디스크와 메모리가 정의되어있음.","type":"text"}]}]}]}]},{"content":[{"inlineContent":[{"text":"만료날짜 및 크기 제한 설정 가능","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"이미지의 URL만 알고 있다면 킹피셔를 이용하여 코드 두줄로 이미지를 캐싱할 수 있다."}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["let url = URL(string: \"https:\/\/example.com\/image.png\")","imageView.kf.setImage(with: url)"]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"memory warning notification을 받았을 때는 clearMemoryCache를 호출한다."}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"memoryCache에 있는 것들을 전부 지운다.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"앱이 꺼지거나 백그라운드 진입했을 때는 clearExpiredDiskCache를 호출한다."}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"expire 된 것들을 지운 다음 여전히 디스크 용량이 많이 차지하고 있으면 contentAccessData로 정렬해서 지운다","type":"text"}]}]}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"GIF 처리를 할 수 있다."}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"AnimatedImageView를 사용하면 메모리 로드를 줄일 수 있지만 CPU load가 크다.","type":"text"}]}]}]}]}]}]}],"type":"unorderedList"},{"anchor":"%EA%B0%81-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EC%97%90%EC%84%9C-%EC%BA%90%EC%8B%9C-%EA%B8%B0%EB%8A%A5%EC%9D%84-%EC%A7%80%EC%9B%90%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%B4-%ED%99%9C%EC%9A%A9%ED%95%98%EB%8A%94-Cocoa-Layer%EC%9D%98-%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5%ED%81%B4%EB%9E%98%EC%8A%A4-%EA%B5%AC%EC%A1%B0%EC%B2%B4-%EB%93%B1%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B4-%EC%9E%88%EB%82%98%EC%9A%94","text":"- 각 라이브러리에서 캐시 기능을 지원하기 위해 활용하는 Cocoa Layer의 주요 기능(클래스, 구조체 등)은 무엇이 있나요?","type":"heading","level":3},{"items":[{"content":[{"inlineContent":[{"text":"기본 기능들을 가지고 어떻게 조합되어있는지?","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"AlamofireImage"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"URLCache (클래스)","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"URLSession"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"URLSessionDataTask","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"CachedURLResponse"}],"type":"paragraph"}]}]}]},{"content":[{"inlineContent":[{"text":"Kingfisher","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"URLSession"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"NSCache","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"NSLock","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"FileManager"}],"type":"paragraph"}]}],"type":"unorderedList"}]}]},{"text":"- 만약 라이브러리에서 on disk cache를 지원한다면, 캐시를 저장하는 디스크 영역은 어디인가요?","type":"heading","level":3,"anchor":"%EB%A7%8C%EC%95%BD-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EC%97%90%EC%84%9C-on-disk-cache%EB%A5%BC-%EC%A7%80%EC%9B%90%ED%95%9C%EB%8B%A4%EB%A9%B4-%EC%BA%90%EC%8B%9C%EB%A5%BC-%EC%A0%80%EC%9E%A5%ED%95%98%EB%8A%94-%EB%94%94%EC%8A%A4%ED%81%AC-%EC%98%81%EC%97%AD%EC%9D%80-%EC%96%B4%EB%94%94%EC%9D%B8%EA%B0%80%EC%9A%94"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"code":"let cacheDirectory = FileManager.default.urls(for: .cachesDirectory, in: .userDomainMask)[0]","type":"codeVoice"}],"type":"paragraph"}]}]},{"text":"추가미션 : 저번 네트워크 프로젝트에서 이미지 캐싱을 적용해보자.","type":"heading","level":3,"anchor":"%EC%B6%94%EA%B0%80%EB%AF%B8%EC%85%98--%EC%A0%80%EB%B2%88-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90%EC%84%9C-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%BA%90%EC%8B%B1%EC%9D%84-%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90"},{"code":["class MyCell: UITableViewCell {","... ","    override func prepareForReuse() { \/\/ 이미지를 지우도록 설정","        picture.image = nil","    }","}","","class ViewController: UIViewController, UITableViewDataSource {","...","    let cache = NSCache<NSString, UIImage>() \/\/ 캐시 인스턴스 생성","...","","\/\/ UITableViewDataSource 프로토콜 채택후 테이블뷰 메소드 내부...","    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {","","...","","        let task = URLSession.shared.dataTask(with: url) { data, response, error in","            ","            ","            if indexPath == tableView.indexPath(for: cell) {","                if let cachedData = self.cache.object(forKey: NSString(string: imageURL)) {","                    DispatchQueue.main.async {\/\/ 캐싱된 데이터가 존재하는지 확인","                        cell.picture.image = cachedData","                    }","                    return","                }","            }","            ","            if let error = error {","                print(\"오류!!!!!!!!!! \", error.localizedDescription)","                return","            }","            guard let httpResponse = response as? HTTPURLResponse,","                  (200...299).contains(httpResponse.statusCode) else {","                      print(\"오류!!!!!!!!!!\")","                      return","                  }","            guard let data = data, let image = UIImage(data: data) else {","                print(\"데이터 변환 오류!!\")","                return","            }","            ","            if indexPath == tableView.indexPath(for: cell) { \/\/ indexPath 확인하고있음.","                self.cache.setObject(image, forKey: NSString(string: imageURL)) \/\/ 이미지 캐싱하고","                DispatchQueue.main.async {","                    \/\/ 캐싱이 되어있지 않다면,","                    cell.picture.image = image \/\/ 이미지 대입","                }","            }","        }","        ","        task.resume()","        ","        return cell","    }","}"],"type":"codeListing","syntax":"swift"},{"type":"thematicBreak"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"참고링크"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"https:\/\/green1229.tistory.com\/57","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"https:\/\/ios-development.tistory.com\/658","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"https:\/\/ios-development.tistory.com\/715"}]}]}]}]}]}]}],"sections":[],"kind":"article","hierarchy":{"paths":[["doc:\/\/AriNote\/documentation\/AriNote","doc:\/\/AriNote\/documentation\/AriNote\/CS"]]},"schemaVersion":{"major":0,"minor":3,"patch":0},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/arinote\/220113_cache,_pagination"]}],"references":{"doc://AriNote/documentation/AriNote":{"kind":"symbol","type":"topic","identifier":"doc:\/\/AriNote\/documentation\/AriNote","abstract":[{"type":"codeVoice","code":"Today I Learned"}],"url":"\/documentation\/arinote","title":"Ari's Notes","role":"collection"},"https://i.imgur.com/mOZGNPY.gif":{"identifier":"https:\/\/i.imgur.com\/mOZGNPY.gif","type":"image","alt":null,"variants":[{"traits":["1x","light"],"url":"https:\/\/i.imgur.com\/mOZGNPY.gif"}]},"https://github.com/Alamofire/AlamofireImage#image-cache":{"identifier":"https:\/\/github.com\/Alamofire\/AlamofireImage#image-cache","type":"link","title":"https:\/\/github.com\/Alamofire\/AlamofireImage#image-cache","titleInlineContent":[{"text":"https:\/\/github.com\/Alamofire\/AlamofireImage#image-cache","type":"text"}],"url":"https:\/\/github.com\/Alamofire\/AlamofireImage#image-cache"},"doc://AriNote/documentation/AriNote/CS":{"type":"topic","role":"collectionGroup","url":"\/documentation\/arinote\/cs","kind":"article","title":"CS","identifier":"doc:\/\/AriNote\/documentation\/AriNote\/CS","abstract":[{"type":"text","text":"Computer Science"}]}}}