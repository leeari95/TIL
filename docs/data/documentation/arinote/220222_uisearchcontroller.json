{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/AriNote\/documentation\/AriNote\/220222_UISearchController"},"schemaVersion":{"patch":0,"minor":3,"major":0},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/arinote\/220222_uisearchcontroller"]}],"hierarchy":{"paths":[["doc:\/\/AriNote\/documentation\/AriNote","doc:\/\/AriNote\/documentation\/AriNote\/UIKit"]]},"primaryContentSections":[{"content":[{"text":"TIL (Today I Learned)","type":"heading","anchor":"TIL-Today-I-Learned","level":1},{"inlineContent":[{"type":"text","text":"2월 22일 (화)"}],"type":"paragraph"},{"text":"학습 내용","type":"heading","level":2,"anchor":"%ED%95%99%EC%8A%B5-%EB%82%B4%EC%9A%A9"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"UISearchController"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":" "}]},{"text":"고민한 점 \/ 해결 방법","level":2,"anchor":"%EA%B3%A0%EB%AF%BC%ED%95%9C-%EC%A0%90--%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95","type":"heading"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"[UISearchController]"}],"type":"strong"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"https:\/\/developer.apple.com\/documentation\/uikit\/uisearchcontroller"}],"type":"paragraph"},{"style":"note","name":"Note","content":[{"inlineContent":[{"text":"메모장 앱의 검색하는 기능은 어떻게 구현할 수 있을까?","type":"text"}],"type":"paragraph"}],"type":"aside"},{"type":"paragraph","inlineContent":[{"text":"Navigation Item에는 ","type":"text"},{"type":"codeVoice","code":"searchController"},{"text":"라는 프로퍼티가 존재한다.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"여기에 "},{"code":"UISearchController","type":"codeVoice"},{"type":"text","text":"를 생성하여 할당해준다."}]},{"type":"codeListing","syntax":"swift","code":["let searchController = UISearchController(searchResultsController: nil) \/\/ 검색 컨트롤러 생성","searchController.searchBar.placeholder = \"Search\" \/\/ placeholder 할당","searchController.hidesNavigationBarDuringPresentation = false \/\/ 스크롤시 네비게이션 바를 숨길건지 여부","searchController.searchResultsUpdater = self \/\/ delegate","searchController.searchBar.delegate = self \/\/ delegate","searchController.searchBar.setShowsCancelButton(false, animated: false) \/\/ 검색바의 cancel 버튼을 보여줄지 여부","","navigationItem.searchController = searchController \/\/ 네비게이션 아이템 할당","navigationItem.hidesSearchBarWhenScrolling = true \/\/ 스크롤시 검색바를 숨길건지 여부"]},{"style":"note","type":"aside","name":"Note","content":[{"type":"paragraph","inlineContent":[{"text":"추가된 검색바","type":"text"}]}]},{"inlineContent":[{"identifier":"https:\/\/i.imgur.com\/qCHMrvk.gif","type":"image"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"스크롤을 내렸을 때 나타나는 검색바"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"thematicBreak"},{"type":"aside","name":"Note","style":"note","content":[{"type":"heading","text":"검색할 때마다 해당 검색어가 포함되어있는 메모를 불러와서 보여주고 싶다!","anchor":"%EA%B2%80%EC%83%89%ED%95%A0-%EB%95%8C%EB%A7%88%EB%8B%A4-%ED%95%B4%EB%8B%B9-%EA%B2%80%EC%83%89%EC%96%B4%EA%B0%80-%ED%8F%AC%ED%95%A8%EB%90%98%EC%96%B4%EC%9E%88%EB%8A%94-%EB%A9%94%EB%AA%A8%EB%A5%BC-%EB%B6%88%EB%9F%AC%EC%99%80%EC%84%9C-%EB%B3%B4%EC%97%AC%EC%A3%BC%EA%B3%A0-%EC%8B%B6%EB%8B%A4","level":3}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"진행하고 있던 프로젝트는 코어데이터를 활용하여 메모를 저장하고 있는 형태였다."}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"NSPredicate"},{"text":"를 활용하여 필터링하여 ","type":"text"},{"code":"fetch","type":"codeVoice"},{"type":"text","text":"를 진행한다."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"그리고 tableView를 ","type":"text"},{"code":"reload","type":"codeVoice"},{"type":"text","text":"해준다."}]}]}]}]}],"type":"unorderedList"},{"syntax":"swift","type":"codeListing","code":["final class PersistentManager {","private(set) var notes = [Note]() \/\/ 뷰에 보여줄 데이터를 담아두는 배열","...","@discardableResult","    func fetch( \/\/ 저장된 코어데이터를 가져오는 메소드","        entityName: String = \"Note\",","        predicate: NSPredicate? = nil,","        sortDescriptors: [NSSortDescriptor]? = [NSSortDescriptor(key: \"lastModified\", ascending: false)]","    ) -> [Note]? {","        let context = persistentContainer.viewContext","        let request = NSFetchRequest<NSManagedObject>(entityName: entityName)","        request.predicate = predicate","        request.returnsObjectsAsFaults = false","        request.sortDescriptors = sortDescriptors","        guard let newData = try? context.fetch(request) as? [Note] else {","            return nil","        }","        return newData","    }","...","","func setUpNotes() { \/\/ fetch를 활용하여 notes를 설정하는 메소드","        guard let newData = fetch() else {","            return","        }","        self.notes = newData","    }","..."]},{"type":"paragraph","inlineContent":[{"type":"text","text":"내 경우에는 코어데이터를 관리하는 타입 내부에서 tableView에 보여질 데이터도 같이 관리하기 때문에, fetch를 받아온 다음 배열에 할당해주는 기능을 추가하여 진행해주었다."}]},{"type":"codeListing","syntax":"swift","code":["final class PersistentManager {","private(set) var notes = [Note]()","...","    func searchNote(text: String) {","        guard let searchData = fetch(","            predicate: NSPredicate(format: \"body CONTAINS[c] %@\", text) \/\/ body에 text가 포함되어있는 것들을 필터링","        ) else {","            return","        }","        self.notes = searchData","    }","..."]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"따라서 위와 같은 "},{"code":"searchNote(text:)","type":"codeVoice"},{"type":"text","text":" 라는 메소드를 구현해주었다."}],"type":"paragraph"}]}]},{"syntax":"swift","type":"codeListing","code":["extension NotesViewController: UISearchResultsUpdating {","    func updateSearchResults(for searchController: UISearchController) {","        guard let searchText = searchController.searchBar.text, searchText != \"\" else { \/\/ 검색어가 비어있다면 return","            return","        }","        PersistentManager.shared.searchNote(text: searchText)","        tableView.reloadData()","    }","}"]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"그리고 "},{"type":"codeVoice","code":"UISearchResultsUpdating"},{"type":"text","text":"를 채택하여 "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uisearchresultsupdating\/1618658-updatesearchresults"},{"text":" 메소드를 구현하여 위에서 만들었던 searchNote 메소드를 호출하고 테이블뷰를 ","type":"text"},{"code":"reload","type":"codeVoice"},{"type":"text","text":" 시켜주었다."}]}]}]},{"type":"thematicBreak"},{"name":"Note","style":"note","type":"aside","content":[{"text":"검색어가 없는 경우에는 메모의 전체를 다시 가져올 순 없을까…?","anchor":"%EA%B2%80%EC%83%89%EC%96%B4%EA%B0%80-%EC%97%86%EB%8A%94-%EA%B2%BD%EC%9A%B0%EC%97%90%EB%8A%94-%EB%A9%94%EB%AA%A8%EC%9D%98-%EC%A0%84%EC%B2%B4%EB%A5%BC-%EB%8B%A4%EC%8B%9C-%EA%B0%80%EC%A0%B8%EC%98%AC-%EC%88%9C-%EC%97%86%EC%9D%84%EA%B9%8C","type":"heading","level":3}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"검색어를 지워도 아까 검색했던 메모만 남아있다.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"즉, 다시 메모의 전체 목록을 보려면 앱을 껐다 켜야하는… 현상이 나타난 것이다.","type":"text"}]}]}]},{"inlineContent":[{"type":"image","identifier":"https:\/\/i.imgur.com\/UXYO5a0.gif"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"따라서 "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uisearchbardelegate"},{"type":"text","text":"를 활용해서 아래와 같이 구현해주었다."}],"type":"paragraph"}]}],"type":"unorderedList"},{"code":["extension NotesViewController: UISearchBarDelegate {","    func searchBar(_ searchBar: UISearchBar, textDidChange searchText: String) {","        guard searchBar.text == \"\" else { \/\/ 검색어가 비어있지 않다면 return","            return","        }","        PersistentManager.shared.setUpNotes() \/\/ 검색어가 비어있다면 다시 notes를 설정하는 메소드를 호출하고","        tableView.reloadData() \/\/ tableView를 reload한다.","    }","}"],"syntax":"swift","type":"codeListing"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"위 메소드는 텍스트가 변경될 때마다 호출되는 메소드이다."}],"type":"paragraph"}]}]},{"type":"aside","style":"note","content":[{"inlineContent":[{"type":"text","text":"검색어가 존재하지 않다면 전체목록을 보여주는 모습"}],"type":"paragraph"}],"name":"Note"},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"https:\/\/i.imgur.com\/ieDQeKV.gif"}]},{"type":"thematicBreak"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"참고링크"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"https:\/\/ios-development.tistory.com\/94"}]}]},{"content":[{"inlineContent":[{"text":"https:\/\/zeddios.tistory.com\/1199","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"https:\/\/codershigh.dscloud.biz\/techblogs\/tb_009_UISearchController\/tb009_script.html"}]}]}],"type":"unorderedList"}]}]}],"kind":"content"}],"kind":"article","metadata":{"role":"article","modules":[{"name":"Ari's Notes"}],"title":"220222 UISearchController","roleHeading":"Article"},"sections":[],"references":{"doc://AriNote/documentation/AriNote/UIKit":{"kind":"article","title":"UIKit","abstract":[{"type":"text","text":"한몸이 되보자…"}],"type":"topic","role":"collectionGroup","identifier":"doc:\/\/AriNote\/documentation\/AriNote\/UIKit","url":"\/documentation\/arinote\/uikit"},"https://developer.apple.com/documentation/uikit/uisearchbardelegate":{"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uisearchbardelegate","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uisearchbardelegate","title":"UISearchBarDelegate","titleInlineContent":[{"text":"UISearchBarDelegate","type":"text"}]},"https://developer.apple.com/documentation/uikit/uisearchresultsupdating/1618658-updatesearchresults":{"type":"link","identifier":"https:\/\/developer.apple.com\/documentation\/uikit\/uisearchresultsupdating\/1618658-updatesearchresults","url":"https:\/\/developer.apple.com\/documentation\/uikit\/uisearchresultsupdating\/1618658-updatesearchresults","title":"updateSearchResults(for:)","titleInlineContent":[{"text":"updateSearchResults(for:)","type":"text"}]},"doc://AriNote/documentation/AriNote":{"kind":"symbol","type":"topic","identifier":"doc:\/\/AriNote\/documentation\/AriNote","abstract":[{"type":"codeVoice","code":"Today I Learned"}],"url":"\/documentation\/arinote","title":"Ari's Notes","role":"collection"},"https://i.imgur.com/qCHMrvk.gif":{"type":"image","identifier":"https:\/\/i.imgur.com\/qCHMrvk.gif","alt":null,"variants":[{"url":"https:\/\/i.imgur.com\/qCHMrvk.gif","traits":["1x","light"]}]},"https://i.imgur.com/UXYO5a0.gif":{"type":"image","identifier":"https:\/\/i.imgur.com\/UXYO5a0.gif","alt":null,"variants":[{"url":"https:\/\/i.imgur.com\/UXYO5a0.gif","traits":["1x","light"]}]},"https://i.imgur.com/ieDQeKV.gif":{"type":"image","identifier":"https:\/\/i.imgur.com\/ieDQeKV.gif","alt":null,"variants":[{"url":"https:\/\/i.imgur.com\/ieDQeKV.gif","traits":["1x","light"]}]}}}